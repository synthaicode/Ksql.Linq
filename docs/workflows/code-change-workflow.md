# Code / Design Change Workflow

このドキュメントは、コード変更・設計変更を行うときの標準的なワークフローをまとめたものです。

## 対象と目的
- 対象:
  - 機能追加
  - リファクタリング / 共通化
  - Public API 整理
  - obsolete API / 属性の削除
  - 横断的なポリシー導入（例: retry policy）
- 目的: 変更内容と意図を docs/diff_log に残しつつ、安全に実装・レビュー・反映する

## 役割
- 司令: 変更の目的と優先度の決定
- 天城: タスク分解と担当割り振り
- 鳴瀬: C# 実装・LINQ→KSQL 変換ロジックの担当
- 迅人: ユニットテスト生成とカバレッジ確認
- 鏡花: コードレビューと品質基準チェック
- 楠木: diff_log への記録、進捗整理

## 標準フロー
1. 要求・背景の整理
   - 司令が「何を変えるか」「なぜ必要か」を簡潔に記述
   - 対象モジュール / 影響範囲を天城と共有

2. タスク分解と設計方針
   - 鳴瀬が設計方針・主要な変更点をまとめる
   - 大きな変更の場合は docs/diff_log に先に設計差分の草案を置く

3. 実装
   - 鳴瀬が既存スタイルに沿って変更を実装
   - 不要な抽象化や将来のためだけの構造は避ける

4. テスト
   - 迅人が変更点に対応するユニットテストを追加 / 更新
   - 既存のテストを実行し、影響がないことを確認

5. レビュー
   - 鏡花がコードとテストをレビューし、品質基準に適合していることを確認

6. diff_log の作成
   - 楠木が `docs/diff_log/diff_{機能名}_{YYYYMMDD}.md` を作成し、変更の意図・範囲・主要な影響を記録

