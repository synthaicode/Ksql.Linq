# Environment / Infrastructure Workflow

このドキュメントは、開発・テスト・物理環境などの環境構築・運用に関する標準的なワークフローをまとめたものです。

## 対象と目的
- 対象:
  - ローカル開発環境の構築・更新
  - Docker / Kafka / ksqlDB / Schema Registry を用いたテスト環境の起動・停止
  - テスト失敗時の環境再起動
- 目的: 環境の起動・停止・再起動手順を標準化し、トラブルシューティングを効率化する

## 役割
- 凪: 環境構築・運用の主担当
- 詩音: 物理テスト視点からの要件提示
- 迅人: テスト実行観点からの要求（必要なポートやサービス）
- 楠木: 環境トラブルと対処履歴の記録

## 標準フロー（環境起動）
1. 事前条件の確認
   - 必要なツール（.NET SDK / Docker / docker-compose 等）が揃っていることを確認

2. 起動
   - 定義済みの docker-compose などで Kafka / ksqlDB / SR を起動

3. ヘルスチェック
   - ポート疎通やエンドポイント確認で、サービスが正常に立ち上がっていることを確認

## 標準フロー（環境再起動）
1. 問題検知
   - テスト失敗や接続エラーなど、環境由来が疑われる問題を検知

2. 再起動
   - 関連コンテナの停止
   - 必要に応じたクリーンアップ（ボリュームや一時データの扱いはポリシーに従う）
   - 環境起動フローに従って再起動

3. 再実行
   - 同じテストまたは操作を再実行し、問題の再現有無を確認

4. 記録
   - 楠木が問題内容・再起動回数・結果を進捗ログに記録

